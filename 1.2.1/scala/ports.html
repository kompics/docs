

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ports and Port Types &mdash; Kompics 1.2.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kompics Internals" href="../internals/index.html" />
    <link rel="prev" title="A Full Example – PingPong" href="pingpong.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Kompics
          

          
            
            <img src="../_static/kompicslogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Kompics Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Kompics Scala</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="helloworld.html">Hello World in Kompics Scala</a></li>
<li class="toctree-l2"><a class="reference internal" href="pingpong.html">A Full Example – PingPong</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ports and Port Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../internals/index.html">Kompics Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project Information</a></li>
<li class="toctree-l1"><a class="reference external" href="https://javadoc.io/doc/se.sics.kompics/kompics-core/latest/index.html">Javadoc</a></li>
<li class="toctree-l1"><a class="reference external" href="https://kompics.github.io/kompics-scala/api/se/sics/kompics/sl/index.html">Scaladoc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kompics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Kompics Scala</a> &raquo;</li>
        
      <li>Ports and Port Types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/scala/ports.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ports-and-port-types">
<span id="ksports"></span><h1>Ports and Port Types<a class="headerlink" href="#ports-and-port-types" title="Permalink to this headline">¶</a></h1>
<p>One thing that wasn’t included in the long <em>PingPong</em> example from the previous section, was the Scala DSL to define new port types.</p>
<p>It was pointed out before that the correct way to deal with singleton classes in Scala is to create objects and this philosophy is followed by the port type DSL. The major change this brings with it, is that now there are two ways to deal with ports type: Java port types are classes and need to be used with either <code class="docutils literal notranslate"><span class="pre">classOf</span></code> or <a class="reference external" href="http://docs.scala-lang.org/overviews/reflection/typetags-manifests.html">TypeTags</a>. On the other hand, Scala port types are objects and need to be treated like values, since objects are not types in Scala. And the same holds true for the difference between (case) classes and (case) objects for events.</p>
<p>To make this clear, we will use a somewhat artificial example. Consider the following three Kompics events:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="k">class</span> <span class="nc">Ping</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">KompicsEvent</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Pong</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">KompicsEvent</span>
<span class="k">case</span> <span class="k">object</span> <span class="nc">Ack</span> <span class="k">extends</span> <span class="nc">KompicsEvent</span>
</pre></div>
</div>
<p>Now a <code class="docutils literal notranslate"><span class="pre">PingPong</span></code> port in Scala could look like this:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">se.sics.kompics.sl._</span>

<span class="k">object</span> <span class="nc">PingPong</span> <span class="k">extends</span> <span class="nc">Port</span> <span class="o">{</span>
        <span class="n">request</span><span class="o">[</span><span class="kt">Ping</span><span class="o">]</span> <span class="c1">// class -&gt; TypeTag</span>
        <span class="n">indication</span><span class="o">[</span><span class="kt">Pong</span><span class="o">]</span> <span class="c1">// class -&gt; TypeTag</span>
        <span class="n">request</span><span class="o">(</span><span class="nc">Ack</span><span class="o">)</span> <span class="c1">// object -&gt; value</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note the important difference between the square brackets where <em>TypeTags</em> are used to declare the event on the port, and and the parenthesis where a value is passed as an argument.</p>
<p>The same things happens again when port types are used. In the previous section we declared</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">net</span> <span class="k">=</span> <span class="k">requires</span><span class="o">[</span><span class="kt">Network</span><span class="o">];</span>
</pre></div>
</div>
<p>and wrote</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">connect</span><span class="o">[</span><span class="kt">Network</span><span class="o">](</span><span class="n">network</span> <span class="o">-&gt;</span> <span class="n">ponger</span><span class="o">);</span>
</pre></div>
</div>
<p>For our new <code class="docutils literal notranslate"><span class="pre">PingPong</span></code> port we would have to write the following instead:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">pp</span> <span class="k">=</span> <span class="k">requires</span><span class="o">(</span><span class="nc">PingPong</span><span class="o">);</span>
<span class="n">connect</span><span class="o">(</span><span class="nc">PingPong</span><span class="o">)(</span><span class="n">ponger</span> <span class="o">-&gt;</span> <span class="n">pinger</span><span class="o">);</span>
</pre></div>
</div>
<p>While this dichotomy of invocations might seem a bit inconsistent it is practically easily applied as the compiler will simply complain when one is trying to do the wrong thing.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../internals/index.html" class="btn btn-neutral float-right" title="Kompics Internals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pingpong.html" class="btn btn-neutral float-left" title="A Full Example – PingPong" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, SICS Swedish ICT and KTH Royal Institute of Technology

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>